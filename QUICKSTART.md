# 🎄 圣诞树新功能快速开始

## 📦 已完成的功能

✅ **随机抽照片** - 点击"🎁 抽照片"按钮随机抽取照片  
✅ **Waline 评论系统** - 写圣诞祝福并发送到圣诞树  
✅ **随机抽祝福** - 点击"🎄 抽祝福"按钮随机抽取评论  

## 🚀 如何配置和使用

### 1️⃣ 配置你的 Waline 地址和功能开关

找到项目根目录的 `.env` 文件，修改以下内容：

```env
# Waline 服务器地址
VITE_WALINE_SERVER_URL=https://your-waline-server.example.com

# 功能开关
VITE_ENABLE_GESTURE_CONTROL=true      # 手势控制
VITE_ENABLE_COMMENT_REPLY=false        # 评论回复
VITE_SHOW_COMMENT_LIST=true            # 显示评论列表
```

**将 `https://your-waline-server.example.com` 替换为你的 Waline 服务器地址。**

**功能说明：**
- 手势控制：是否启用摄像头手势操作
- 评论回复：是否允许回复其他人的祝福
- 显示评论列表：发祝福时是否显示其他人的祝福

详细配置说明请查看 `CONFIG_GUIDE.md`

### 2️⃣ 如果你还没有 Waline 服务器

访问 [Waline 快速上手](https://waline.js.org/guide/get-started/) 部署一个：

#### 推荐部署方式：
- **Vercel**（最简单，免费）
- **Railway**（免费额度）
- **自己的服务器**

部署只需 3-5 分钟，完全免费！

### 3️⃣ 启动项目

```bash
npm run dev
```

### 4️⃣ 使用新功能

打开浏览器访问项目，你会看到底部控制栏新增了 3 个按钮：

- **🎁 抽照片** - 随机从圣诞树上抽取一张照片展示
- **💌 写祝福 (数量)** - 打开评论框，写下你的圣诞祝福
- **🎄 抽祝福** - 随机抽取一条评论展示（需要先有评论）

## 💡 提示

- 如果不配置 Waline，只有"🎁 抽照片"按钮会显示，评论相关按钮会自动隐藏
- 评论数据保存在你的 Waline 服务器上
- 评论列表每 30 秒自动刷新
- 所有功能都已适配移动端
- **手势控制可以通过环境变量关闭，减少性能消耗**
- **抽取动画期间会自动禁用手势，防止冲突**
- **可以配置是否显示评论回复和评论列表**

## 🎨 界面预览

配置完成后的界面布局：

```
┌─────────────────────────────────────────┐
│          🎄 3D 圣诞树                    │
│                                         │
│  [背景选择] [调试] [组装/散开]           │
│  [🎁 抽照片] [💌 写祝福] [🎄 抽祝福]     │
└─────────────────────────────────────────┘
```

## 🛠️ 技术栈

新增依赖：
- `@waline/client` - Waline 评论客户端

## 📝 文件说明

```
src/
├── WalineIntegration.tsx  # Waline 集成组件和钩子
├── waline-config.ts       # Waline 配置文件
└── App.tsx               # 主应用（已添加新功能）

.env                       # 环境变量配置（需要你修改）
.env.example              # 环境变量模板
```

## ⚠️ 常见问题

**Q: 评论按钮不显示？**  
A: 检查 `.env` 文件中的 `VITE_WALINE_SERVER_URL` 是否正确配置。

**Q: 评论无法发送？**  
A: 确认 Waline 服务器地址正确且服务器正常运行。

**Q: 抽祝福按钮灰色无法点击？**  
A: 需要先有评论才能抽祝福，点击"💌 写祝福"发送第一条评论。

## 🎉 开始使用

配置好 `.env` 文件后，运行 `npm run dev`，享受新功能吧！

---

祝你圣诞快乐！🎄✨
